(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1de68086"],{4112:function(e,t,l){},"473c":function(e,t,l){"use strict";l.r(t);var o=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("el-breadcrumb",{attrs:{separator:"/"}},[l("el-breadcrumb-item",{attrs:{to:{path:"/index"}}},[e._v("Home")]),l("el-breadcrumb-item",[e._v("Information")]),l("el-breadcrumb-item",[e._v("teacher")])],1),l("el-card",{attrs:{shadow:"always"}},[l("el-row",{attrs:{gutter:10}},[l("el-col",{attrs:{span:8}},[l("el-input",{attrs:{placeholder:"search by name",clearable:""},on:{clear:function(t){return e.selectTeacherByPageAndCondition()}},model:{value:e.queryInfo.condition,callback:function(t){e.$set(e.queryInfo,"condition",t)},expression:"queryInfo.condition"}},[l("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.selectTeacherByPageAndCondition()}},slot:"append"})],1)],1),l("el-col",{attrs:{span:4,offset:1}},[l("el-button",{attrs:{type:"success"},on:{click:function(t){return e.exportToExcel()}}},[e._v("Data export")])],1),l("el-col",{attrs:{span:4,offset:7}},[l("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.judgeGrade()}}},[e._v("add teacher")])],1)],1),l("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:""},on:{"selection-change":e.handleSelectionChange}},[l("el-table-column",{attrs:{type:"selection",width:"40"}}),l("el-table-column",{attrs:{prop:"tno",label:"teacher ID"}}),l("el-table-column",{attrs:{prop:"tname",label:"name"}}),l("el-table-column",{attrs:{prop:"tage",label:"age",width:"50"}}),l("el-table-column",{attrs:{prop:"tsex",label:"sex",width:"50"}}),l("el-table-column",{attrs:{prop:"tpt",label:"title",width:"180"}}),l("el-table-column",{attrs:{prop:"teb",label:"education",width:"90"}}),l("el-table-column",{attrs:{prop:"c1_name",label:"course 1"}}),l("el-table-column",{attrs:{prop:"c2_name",label:"course 2"}}),l("el-table-column",{attrs:{prop:"c3_name",label:"course 3"}}),l("el-table-column",{attrs:{label:"operate"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(l){return e.showInfo(t.row.tno)}}}),l("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(l){return e.deleteTeacher(t.row.tno)}}})]}}])})],1),l("el-pagination",{attrs:{"current-page":e.queryInfo.currentPage,"page-sizes":[1,2,5,10],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),l("el-dialog",{attrs:{title:"add teacher",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.resetDialog}},[l("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[l("el-form-item",{attrs:{label:"teacher ID","label-width":e.formLabelWidth,prop:"tno"}},[l("el-input",{attrs:{placeholder:"please input teacher ID",clearable:""},model:{value:e.form.tno,callback:function(t){e.$set(e.form,"tno",t)},expression:"form.tno"}})],1),l("el-form-item",{attrs:{label:"password","label-width":e.formLabelWidth,prop:"spassword"}},[l("el-input",{attrs:{placeholder:"please input password",clearable:""},model:{value:e.form.spassword,callback:function(t){e.$set(e.form,"spassword",t)},expression:"form.spassword"}})],1),l("el-form-item",{attrs:{label:"name","label-width":e.formLabelWidth,prop:"tname"}},[l("el-input",{attrs:{placeholder:"please input name",clearable:""},model:{value:e.form.tname,callback:function(t){e.$set(e.form,"tname",t)},expression:"form.tname"}})],1),l("el-form-item",{attrs:{label:"personal ID","label-width":e.formLabelWidth,prop:"sid"}},[l("el-input",{attrs:{placeholder:"please input personal ID",clearable:""},model:{value:e.form.sid,callback:function(t){e.$set(e.form,"sid",t)},expression:"form.sid"}})],1),l("el-form-item",{attrs:{label:"sex","label-width":e.formLabelWidth,prop:"tsex"}},[l("el-select",{attrs:{placeholder:"please select sex",clearable:""},model:{value:e.form.tsex,callback:function(t){e.$set(e.form,"tsex",t)},expression:"form.tsex"}},[l("el-option",{attrs:{label:"boy",value:"boy"}}),l("el-option",{attrs:{label:"girl",value:"girl"}})],1)],1),l("el-form-item",{attrs:{label:"age","label-width":e.formLabelWidth,prop:"tage"}},[l("el-input",{attrs:{placeholder:"please input age",clearable:""},model:{value:e.form.tage,callback:function(t){e.$set(e.form,"tage",t)},expression:"form.tage"}})],1),l("el-form-item",{attrs:{label:"education","label-width":e.formLabelWidth,prop:"teb"}},[l("el-select",{attrs:{placeholder:"please selection education",clearable:""},model:{value:e.form.teb,callback:function(t){e.$set(e.form,"teb",t)},expression:"form.teb"}},[l("el-option",{attrs:{label:"Bachelor",value:"Bachelor"}}),l("el-option",{attrs:{label:"Master",value:"Master"}}),l("el-option",{attrs:{label:"PhD",value:"PhD"}})],1)],1),l("el-form-item",{attrs:{label:"course 1","label-width":e.formLabelWidth,prop:"cno1"}},[l("el-select",{attrs:{placeholder:"select course 1",clearable:""},model:{value:e.form.cno1,callback:function(t){e.$set(e.form,"cno1",t)},expression:"form.cno1"}},e._l(e.allCourse,(function(e){return l("el-option",{attrs:{label:e.cname,value:e.cno}})})),1)],1),l("el-form-item",{attrs:{label:"course 2","label-width":e.formLabelWidth,prop:"cno2"}},[l("el-select",{attrs:{placeholder:"select course 2",clearable:""},model:{value:e.form.cno2,callback:function(t){e.$set(e.form,"cno2",t)},expression:"form.cno2"}},e._l(e.allCourse,(function(e){return l("el-option",{attrs:{label:e.cname,value:e.cno}})})),1)],1),l("el-form-item",{attrs:{label:"course 3","label-width":e.formLabelWidth,prop:"cno3"}},[l("el-select",{attrs:{placeholder:"select course 3",clearable:""},model:{value:e.form.cno3,callback:function(t){e.$set(e.form,"cno3",t)},expression:"form.cno3"}},e._l(e.allCourse,(function(e){return l("el-option",{attrs:{label:e.cname,value:e.cno}})})),1)],1)],1),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:e.resetDialog}},[e._v("Cancel")]),l("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addTeacher("form")}}},[e._v("Confirm")])],1)],1),l("el-dialog",{attrs:{title:"change information",visible:e.infoDialog},on:{"update:visible":function(t){e.infoDialog=t},close:e.resetInfoDialog}},[l("el-form",{ref:"InfoForm",attrs:{model:e.InfoForm,rules:e.rules}},[l("el-form-item",{attrs:{label:"teacher ID","label-width":e.formLabelWidth,prop:"tno"}},[l("el-input",{attrs:{clearable:""},model:{value:e.InfoForm.tno,callback:function(t){e.$set(e.InfoForm,"tno",t)},expression:"InfoForm.tno"}})],1),l("el-form-item",{attrs:{label:"name","label-width":e.formLabelWidth,prop:"tname"}},[l("el-input",{model:{value:e.InfoForm.tname,callback:function(t){e.$set(e.InfoForm,"tname",t)},expression:"InfoForm.tname"}})],1),l("el-form-item",{attrs:{label:"sex","label-width":e.formLabelWidth,prop:"tsex"}},[l("el-select",{attrs:{placeholder:"select sex"},model:{value:e.InfoForm.tsex,callback:function(t){e.$set(e.InfoForm,"tsex",t)},expression:"InfoForm.tsex"}},[l("el-option",{attrs:{label:"boy",value:"boy"}}),l("el-option",{attrs:{label:"girl",value:"girl"}})],1)],1),l("el-form-item",{attrs:{label:"age","label-width":e.formLabelWidth,prop:"tage"}},[l("el-input",{model:{value:e.InfoForm.tage,callback:function(t){e.$set(e.InfoForm,"tage",t)},expression:"InfoForm.tage"}})],1),l("el-form-item",{attrs:{label:"title","label-width":e.formLabelWidth,prop:"tpt"}},[l("el-select",{model:{value:e.InfoForm.tpt,callback:function(t){e.$set(e.InfoForm,"tpt",t)},expression:"InfoForm.tpt"}},[l("el-option",{attrs:{label:"Teaching assistant",value:"Teaching assistant"}}),l("el-option",{attrs:{label:"lecturer",value:"lecturer"}}),l("el-option",{attrs:{label:"Associate professor",value:"Associate professor"}}),l("el-option",{attrs:{label:"Prof.",value:"Prof."}})],1)],1),l("el-form-item",{attrs:{label:"education","label-width":e.formLabelWidth,prop:"teb"}},[l("el-select",{model:{value:e.InfoForm.teb,callback:function(t){e.$set(e.InfoForm,"teb",t)},expression:"InfoForm.teb"}},[l("el-option",{attrs:{label:"Bachelor",value:"Bachelor"}}),l("el-option",{attrs:{label:"Master",value:"Master"}}),l("el-option",{attrs:{label:"PhD",value:"PhD"}})],1)],1),l("el-form-item",{attrs:{label:"course 1","label-width":e.formLabelWidth,prop:"cno1"}},[l("el-select",{attrs:{clearable:""},on:{clear:function(t){return e.clearNo1()}},model:{value:e.InfoForm.cno1,callback:function(t){e.$set(e.InfoForm,"cno1",t)},expression:"InfoForm.cno1"}},e._l(e.allCourse,(function(e){return l("el-option",{attrs:{label:e.cname,value:e.cno}})})),1)],1),l("el-form-item",{attrs:{label:"course 2","label-width":e.formLabelWidth,prop:"cno2"}},[l("el-select",{attrs:{clearable:""},on:{clear:function(t){return e.clearNo2()}},model:{value:e.InfoForm.cno2,callback:function(t){e.$set(e.InfoForm,"cno2",t)},expression:"InfoForm.cno2"}},e._l(e.allCourse,(function(e){return l("el-option",{attrs:{label:e.cname,value:e.cno}})})),1)],1),l("el-form-item",{attrs:{label:"course 3","label-width":e.formLabelWidth,prop:"cno3"}},[l("el-select",{attrs:{clearable:""},on:{clear:function(t){return e.clearNo3()}},model:{value:e.InfoForm.cno3,callback:function(t){e.$set(e.InfoForm,"cno3",t)},expression:"InfoForm.cno3"}},e._l(e.allCourse,(function(e){return l("el-option",{attrs:{label:e.cname,value:e.cno}})})),1)],1)],1),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:e.resetInfoDialog}},[e._v("Cancel")]),l("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.changeInfo("InfoForm")}}},[e._v("Confirm")])],1)],1)],1)},a=[],r={inject:["reload"],name:"teacherInfo",data(){return{rules:{tno:[{required:!0,message:"please input techer ID",trigger:"blur"},{pattern:/\b\d{8}\b/,message:"Please enter an 8-digit ID",trigger:"blur"}],tname:[{required:!0,message:"pelase input techer name",trigger:"blur"}],tsex:[{required:!0,message:"select sex",trigger:"change"}],tage:[{required:!0,message:"please input age",trigger:"blur"},{pattern:/\b\d{2}\b/,message:"Please enter an 2-digit number",trigger:"blur"}],tpt:[{required:!0,message:"please select title",trigger:"change"}],teb:[{required:!0,message:"please select education",trigger:"change"}]},allCourse:[],multipleSelection:[],selectNos:[],form:{tno:"",spassword:"",tname:"",sid:"",tsex:"",tage:"",tpt:"teacher",teb:"",power:"teacher"},formLabelWidth:"120px",queryInfo:{condition:"",currentPage:1,pageSize:10},InfoForm:{tno:"",spassword:"",tname:"",sid:"",tsex:"",tage:"",tpt:"teacher",teb:"",power:"teacher"},total:0,allTableData:[],tableData:[],dialogFormVisible:!1,infoDialog:!1}},created(){this.selectTeacherByPageAndCondition(),this.getAllCourse(),this.getAllTeacher()},methods:{judgeGrade(){"teacher"==JSON.parse(localStorage.getItem("user")).power?this.dialogFormVisible=!0:this.$notify({title:"Warning",message:"You do not have permission",type:"warning"})},clearNo1(){delete this.InfoForm["cno1"]},clearNo2(){delete this.InfoForm["cno2"]},clearNo3(){delete this.InfoForm["cno3"]},changeInfo(e){this.$refs[e].validate(e=>{e&&this.common.changeInfo(this,this.apiUrl.updateTeacherInfo)})},showInfo(e){this.common.selectDetailInfo(this,this.apiUrl.selectTeacherBytno,e)},deleteTeacher(e){this.common.deletes(this,this.apiUrl.deleteTeacherByNo,this.apiUrl.deleteMultipleTeacher,"老师",e)},exportToExcel(){l.e("chunk-26765ab6").then((()=>{let{exportJsonToExcel:e}=l("39a0"),t=["teacher ID","name","age","sex","title","education","course 1","course 2","course 3"],o=["tno","tname","tage","tsex","tpt","teb","c1_name","c2_name","c3_name"],a=this.allTableData,r=this.formatJson(o,a);var n="teacher information";e(t,r,n)}).bind(null,l)).catch(l.oe)},formatJson(e,t){return t.map(t=>e.map(e=>t[e]))},addTeacher(e){this.form.cno1==this.form.cno2&&void 0!=this.form.cno1&&void 0!=this.form.cno2||this.form.cno1==this.form.cno3&&void 0!=this.form.cno1&&void 0!=this.form.cno3||this.form.cno2==this.form.cno3&&void 0!=this.form.cno2&&void 0!=this.form.cno3?this.$message({type:"error",message:"course cannot be repeated"}):this.$refs[e].validate(e=>{e&&this.common.addOne(this,this.apiUrl.addTeacher)})},getAllCourse(){let e=this;this.$axios.get(this.apiUrl.selectAllCourse).then(t=>{e.allCourse=t.data.data.data}).catch(e=>{console.log("--error---",e)})},resetInfoDialog(){this.$refs["InfoForm"].resetFields(),this.infoDialog=!1},resetDialog(){this.$refs["form"].resetFields(),this.dialogFormVisible=!1},handleSelectionChange(e){this.multipleSelection=e},handleSizeChange(e){this.queryInfo.pageSize=e,this.selectTeacherByPageAndCondition()},handleCurrentChange(e){this.queryInfo.currentPage=e,this.selectTeacherByPageAndCondition()},selectTeacherByPageAndCondition(){this.common.getAllDataByConditionAndPage(this,this.apiUrl.selectTeacherByPageAndCondition)},getAllTeacher(){this.common.getAllData(this,this.apiUrl.selectAllTeacher)}}},n=r,s=(l("bde1"),l("2877")),i=Object(s["a"])(n,o,a,!1,null,"59db5c30",null);t["default"]=i.exports},bde1:function(e,t,l){"use strict";var o=l("4112"),a=l.n(o);a.a}}]);
//# sourceMappingURL=chunk-1de68086.5fbbf418.js.map