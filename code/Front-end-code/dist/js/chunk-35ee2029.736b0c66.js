(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35ee2029"],{"156f":function(e,t,o){"use strict";var r=o("cc26"),a=o.n(r);a.a},"35d2":function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-breadcrumb",{attrs:{separator:"/"}},[o("el-breadcrumb-item",{attrs:{to:{path:"/index"}}},[e._v("Home")]),o("el-breadcrumb-item",[e._v("Information")]),o("el-breadcrumb-item",[e._v("course")])],1),o("el-card",{attrs:{shadow:"always"}},[o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:8}},[o("el-input",{attrs:{placeholder:"please enter course name",clearable:""},on:{clear:e.selectCourseByConditionAndPage},model:{value:e.queryInfo.condition,callback:function(t){e.$set(e.queryInfo,"condition",t)},expression:"queryInfo.condition"}},[o("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.selectCourseByConditionAndPage},slot:"append"})],1)],1),o("el-col",{attrs:{span:2,offset:1}},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.judgeGrade()}}},[e._v("add course")])],1),o("el-col",{attrs:{span:2,offset:8}},[o("el-button",{attrs:{type:"success"},on:{click:e.exportToExcel}},[e._v("export course")])],1)],1),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:""},on:{"selection-change":e.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection",width:"40"}}),o("el-table-column",{attrs:{prop:"cno",label:"course ID",width:"150"}}),o("el-table-column",{attrs:{prop:"cname",label:"Course name",width:"150"}}),o("el-table-column",{attrs:{prop:"tname",label:"teacher",width:"100"}}),o("el-table-column",{attrs:{prop:"ccredit",label:"credits",width:"70"}}),o("el-table-column",{attrs:{prop:"pre_cno",label:"pre-course ID",width:"150"}}),o("el-table-column",{attrs:{prop:"pre_cname",label:"pre-course name",width:"169"}}),o("el-table-column",{attrs:{prop:"pre_ccredit",label:"pre-course credits",width:"169"}}),o("el-table-column",{attrs:{label:"operation"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"success",icon:"el-icon-thumb",size:"mini"},on:{click:function(o){return e.chooseCourse(t.row.cno,t.row.tno)}}}),o("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(o){return e.showInfo(t.row.cno)}}}),o("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(o){return e.deleteCourse(t.row.cno)}}})]}}])})],1),o("el-pagination",{attrs:{"current-page":e.queryInfo.currentPage,"page-sizes":[1,2,5,10],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),o("el-dialog",{attrs:{title:"add course",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.resetDialog}},[o("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[o("el-form-item",{attrs:{label:"course ID","label-width":e.formLabelWidth,prop:"cno"}},[o("el-input",{attrs:{placeholder:"please input course ID",clearable:""},model:{value:e.form.cno,callback:function(t){e.$set(e.form,"cno",t)},expression:"form.cno"}})],1),o("el-form-item",{attrs:{label:"course name","label-width":e.formLabelWidth,prop:"cname"}},[o("el-input",{attrs:{placeholder:"please input course name",clearable:""},model:{value:e.form.cname,callback:function(t){e.$set(e.form,"cname",t)},expression:"form.cname"}})],1),o("el-form-item",{attrs:{label:"credits","label-width":e.formLabelWidth,prop:"ccredit"}},[o("el-input",{attrs:{placeholder:"please input credits",clearable:""},model:{value:e.form.ccredit,callback:function(t){e.$set(e.form,"ccredit",t)},expression:"form.ccredit"}})],1),o("el-form-item",{attrs:{label:"pre-course","label-width":e.formLabelWidth}},[o("el-select",{attrs:{placeholder:"please select pre-course"},model:{value:e.form.cpno,callback:function(t){e.$set(e.form,"cpno",t)},expression:"form.cpno"}},e._l(e.allCourse,(function(e){return o("el-option",{key:e.cno,attrs:{label:e.cname,value:e.cno}})})),1)],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.resetDialog}},[e._v("Cancel")]),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addCourse("form")}}},[e._v("Confirm")])],1)],1),o("el-dialog",{attrs:{title:"change information",visible:e.infoDialog},on:{"update:visible":function(t){e.infoDialog=t},close:e.resetInfoDialog}},[o("el-form",{ref:"InfoForm",attrs:{model:e.InfoForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"course ID","label-width":e.formLabelWidth,prop:"cno"}},[o("el-input",{attrs:{clearable:""},model:{value:e.InfoForm.cno,callback:function(t){e.$set(e.InfoForm,"cno",t)},expression:"InfoForm.cno"}})],1),o("el-form-item",{attrs:{label:"course name","label-width":e.formLabelWidth,prop:"cname"}},[o("el-input",{attrs:{clearable:""},model:{value:e.InfoForm.cname,callback:function(t){e.$set(e.InfoForm,"cname",t)},expression:"InfoForm.cname"}})],1),o("el-form-item",{attrs:{label:"teacher","label-width":e.formLabelWidth}},[o("el-input",{attrs:{disabled:""},model:{value:e.InfoForm.tname,callback:function(t){e.$set(e.InfoForm,"tname",t)},expression:"InfoForm.tname"}})],1),o("el-form-item",{attrs:{label:"credits","label-width":e.formLabelWidth,prop:"cname"}},[o("el-input",{attrs:{clearable:""},model:{value:e.InfoForm.ccredit,callback:function(t){e.$set(e.InfoForm,"ccredit",t)},expression:"InfoForm.ccredit"}})],1),o("el-form-item",{attrs:{label:"pre-course","label-width":e.formLabelWidth,prop:"cpno"}},[o("el-select",{model:{value:e.InfoForm.pre_cno,callback:function(t){e.$set(e.InfoForm,"pre_cno",t)},expression:"InfoForm.pre_cno"}},e._l(e.allCourse,(function(e){return o("el-option",{key:e.cno,attrs:{label:e.cname,value:e.cno}})})),1)],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.resetInfoDialog}},[e._v("Cancel")]),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.changeInfo("InfoForm")}}},[e._v("Confirm")])],1)],1)],1)},a=[],l={inject:["reload"],name:"courseInfo",data(){return{rules:{cno:[{require:!0,message:"please input course ID",trigger:"blur"},{pattern:/\b\d{8}\b/,message:"Please input the 8-digit course ID",trigger:"blur"}],cname:[{required:!0,message:"please input course name",trigger:"blur"}],ccredit:[{required:!0,message:"please input credits",trigger:"blur"},{pattern:/^\d+$|^\d+[.]?\d+$/,message:"please input the number",trigger:"blur"}]},allCourse:[],multipleSelection:[],selectNos:[],formLabelWidth:"120px",queryInfo:{condition:"",currentPage:1,pageSize:10},InfoForm:{cno:"",cname:"",ccredit:""},total:0,form:{cno:"",cname:"",ccredit:""},tableData:[],allTableData:[],dialogFormVisible:!1,infoDialog:!1}},created(){this.selectCourseByConditionAndPage(),this.getAllCourse(),this.selectAllCourse()},methods:{judgeGrade(){"teacher"==JSON.parse(localStorage.getItem("user")).power?this.dialogFormVisible=!0:this.$notify({title:"Warning",message:"You do not have permission",type:"warning"})},chooseCourse(e,t){if(void 0==t)this.$message({type:"error",message:"The course is not yet available"});else{if("teacher"==JSON.parse(localStorage.getItem("user")).power)return void this.$notify({title:"Warning",message:"Only student can select course",type:"warning"});let o=this,r={cno:e,tno:t,sno:JSON.parse(localStorage.getItem("user")).sno};this.$axios.get(this.apiUrl.addSct,{params:r}).then(e=>{"student"==JSON.parse(localStorage.getItem("user")).power&&o.$confirm("Confirm to select this course?","Tips",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"success"}).then(()=>{200==e.data.status?o.$message({type:"success",message:"select success"}):o.common.errorReturn(o,e.data.data.detailMessage)}).catch(()=>{})}).catch(e=>{console.log("---error---",e)})}},changeInfo(e){this.InfoForm.cno==this.InfoForm.pre_cno?this.$message({type:"error",message:"The pre-course is the same as the course to be modified"}):this.$refs[e].validate(e=>{e&&this.common.changeInfo(this,this.apiUrl.updateCourseInfo)})},showInfo(e){this.common.selectDetailInfo(this,this.apiUrl.selectCourseByCno,e)},resetInfoDialog(){this.$refs["InfoForm"].resetFields(),this.infoDialog=!1},deleteCourse(e){this.common.deletes(this,this.apiUrl.deleteCourseByNo,this.apiUrl.deleteMultipleCourse,"课程",e)},exportToExcel(){o.e("chunk-26765ab6").then((()=>{let{exportJsonToExcel:e}=o("39a0"),t=["course ID","course name","credits","pre-course ID","pre-course name","pre-course credits"],r=["cno","cname","ccredit","pre_cno","pre_cname","pre_ccredit"],a=this.allTableData,l=this.formatJson(r,a);var s="all course information";e(t,l,s)}).bind(null,o)).catch(o.oe)},formatJson(e,t){return t.map(t=>e.map(e=>t[e]))},addCourse(e){this.form.cpno==this.form.cno?this.$message({type:"error",message:"The pre-course is the same as the course to be modified"}):this.$refs[e].validate(e=>{e&&this.common.addOne(this,this.apiUrl.addCourse)})},getAllCourse(){let e=this;this.$axios.get(this.apiUrl.selectAllCourse).then(t=>{e.allCourse=t.data.data.data}).catch(e=>{console.log("--error--",e)})},resetDialog(){this.$refs["form"].resetFields(),this.dialogFormVisible=!1},handleSelectionChange(e){this.multipleSelection=e},handleSizeChange(e){this.queryInfo.pageSize=e,this.selectCourseByConditionAndPage()},handleCurrentChange(e){this.queryInfo.currentPage=e,this.selectCourseByConditionAndPage()},selectCourseByConditionAndPage(){this.common.getAllDataByConditionAndPage(this,this.apiUrl.selectCourseByPageAndCondition)},selectAllCourse(){this.common.getAllData(this,this.apiUrl.selectAllCourses)}}},s=l,n=(o("156f"),o("2877")),i=Object(n["a"])(s,r,a,!1,null,"acd4f4fa",null);t["default"]=i.exports},cc26:function(e,t,o){}}]);
//# sourceMappingURL=chunk-35ee2029.736b0c66.js.map