(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5bce5c5a"],{"3e94":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-breadcrumb",{attrs:{separator:"/"}},[o("el-breadcrumb-item",{attrs:{to:{path:"/index"}}},[e._v("Home")]),o("el-breadcrumb-item",[e._v("Information")]),o("el-breadcrumb-item",[e._v("my student")])],1),o("el-card",{attrs:{shadow:"always"}},[o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:8}},[o("el-input",{attrs:{placeholder:"Please enter the student name to search",clearable:""},on:{clear:e.selectSctByConditionAndPage},model:{value:e.queryInfo.condition,callback:function(t){e.$set(e.queryInfo,"condition",t)},expression:"queryInfo.condition"}},[o("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.selectSctByConditionAndPage},slot:"append"})],1)],1),o("el-col",{attrs:{span:4,offset:12}},[o("el-button",{attrs:{type:"success"},on:{click:e.exportToExcel}},[e._v("Data export")])],1)],1),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:""},on:{"selection-change":e.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection",width:"40"}}),o("el-table-column",{attrs:{prop:"sname",label:"student",width:"140"}}),o("el-table-column",{attrs:{prop:"tname",label:"teacher",width:"140"}}),o("el-table-column",{attrs:{prop:"cno",label:"course ID"}}),o("el-table-column",{attrs:{prop:"cname",label:"course name"}}),o("el-table-column",{attrs:{prop:"ccredit",label:"credits"}}),o("el-table-column",{attrs:{prop:"grade",label:"grade"}}),o("el-table-column",{attrs:{label:"operate"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(o){return e.showInfo(t.row.sno,t.row.tno,t.row.cno)}}}),o("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(o){return e.deleteSct(t.row.sno,t.row.tno,t.row.cno)}}})]}}])})],1),o("el-pagination",{attrs:{"current-page":e.queryInfo.currentPage,"page-sizes":[1,2,5,10],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),o("el-dialog",{attrs:{title:"change information",visible:e.infoDialog},on:{"update:visible":function(t){e.infoDialog=t},close:e.resetInfoDialog}},[o("el-form",{ref:"InfoForm",attrs:{model:e.InfoForm}},[o("el-form-item",{attrs:{label:"student","label-width":e.formLabelWidth,prop:"sno"}},[o("el-input",{attrs:{disabled:""},model:{value:e.InfoForm.sname,callback:function(t){e.$set(e.InfoForm,"sname",t)},expression:"InfoForm.sname"}})],1),o("el-form-item",{attrs:{label:"teacher","label-width":e.formLabelWidth,prop:"spassword"}},[o("el-input",{attrs:{disabled:""},model:{value:e.InfoForm.tname,callback:function(t){e.$set(e.InfoForm,"tname",t)},expression:"InfoForm.tname"}})],1),o("el-form-item",{attrs:{label:"course ID","label-width":e.formLabelWidth,prop:"sname"}},[o("el-input",{attrs:{disabled:""},model:{value:e.InfoForm.cno,callback:function(t){e.$set(e.InfoForm,"cno",t)},expression:"InfoForm.cno"}})],1),o("el-form-item",{attrs:{label:"course name","label-width":e.formLabelWidth,prop:"ssex"}},[o("el-input",{attrs:{disabled:""},model:{value:e.InfoForm.cname,callback:function(t){e.$set(e.InfoForm,"cname",t)},expression:"InfoForm.cname"}})],1),o("el-form-item",{attrs:{label:"credits","label-width":e.formLabelWidth,prop:"sage"}},[o("el-input",{attrs:{disabled:""},model:{value:e.InfoForm.ccredit,callback:function(t){e.$set(e.InfoForm,"ccredit",t)},expression:"InfoForm.ccredit"}})],1),o("el-form-item",{attrs:{label:"grade","label-width":e.formLabelWidth}},[o("el-input",{attrs:{clearable:""},model:{value:e.InfoForm.grade,callback:function(t){e.$set(e.InfoForm,"grade",t)},expression:"InfoForm.grade"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.resetInfoDialog}},[e._v("Cancel")]),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.changeInfo()}}},[e._v("Confirm")])],1)],1)],1)},n=[],l={inject:["reload"],name:"sctInfo",data(){return{infoDialog:!1,formLabelWidth:"120px",InfoForm:{sno:"",tno:"",cno:"",cname:"",ccredit:"",grade:""},selectNos:[],tableData:[],queryInfo:{condition:"",tno:JSON.parse(localStorage.getItem("user")).sno,currentPage:1,pageSize:10},total:0,allTableData:[],multipleSelection:[]}},created(){this.selectSctByConditionAndPage(),this.selectAllSct()},methods:{changeInfo(){let e=this,t=new FormData;t.append("grade",this.InfoForm.grade),t.append("sno",this.InfoForm.sno),t.append("cno",this.InfoForm.cno),t.append("tno",this.InfoForm.tno),this.$axios({method:"post",data:t,url:this.apiUrl.changeGradeByNos}).then(t=>{200==t.data.status?(e.$message({type:"success",message:"success"}),e.infoDialog=!1,e.reload()):e.common.errorReturn(e,t.data.data.detailMessage)}).catch(e=>{console.log("--error---",e)})},showInfo(e,t,o){if(console.log("----sno---",e),console.log("----tno---",t),console.log("----cno---",o),"teacher"==JSON.parse(localStorage.getItem("user")).power){this.infoDialog=!0;let a=this,n={sno:e,cno:o,tno:t};this.$axios.get(this.apiUrl.selectSctByNos,{params:n}).then(e=>{console.log("----response---",e),200==e.data.status&&(a.InfoForm=e.data.data.data)}).catch(e=>{console.log("----error---",e)})}else this.$notify({title:"Warning",message:"you are not the teacher",type:"warning"})},resetInfoDialog(){this.$refs["InfoForm"].resetFields(),this.infoDialog=!1},deleteSct(e,t,o){"teacher"==JSON.parse(localStorage.getItem("user")).power?this.multipleSelection.length>1?this.$confirm("sure to delete these students?","Tips",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"success"}).then(()=>{let e=this,t=new FormData;t.append("sctArrays",this.multipleSelection),this.$axios({method:"post",data:this.multipleSelection,contentType:"application/json; charset=utf-8",dataType:"json",url:this.apiUrl.deleteMultipleSct}).then(t=>{200==t.data.status?(e.$message({message:"success",type:"success "}),e.reload()):e.common.errorReturn(e,t.data.detailMessage)}).catch(e=>{console.log("---error---",e)})}).catch(()=>{}):this.$confirm("sure to delete this student?","Tips",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"success"}).then(()=>{let a=this,n={sno:e,tno:t,cno:o};this.$axios.get(this.apiUrl.deleteSctBySno,{params:n}).then(e=>{200==e.data.status?a.$message({message:"success",type:"success "}):a.common.errorReturn(a,e.data.data.detailMessage),a.reload()}).catch(e=>{console.log("--error--",e)})}).catch(()=>{}):this.$notify({title:"Warning",message:"",type:"warning"})},exportToExcel(){o.e("chunk-26765ab6").then((()=>{let{exportJsonToExcel:e}=o("39a0"),t=["student","teacher","course ID","course name","credits","grade"],a=["sname","tname","cno","cname","ccredit","grade"],n=this.allTableData,l=this.formatJson(a,n);var s="my student";e(t,l,s)}).bind(null,o)).catch(o.oe)},formatJson(e,t){return t.map(t=>e.map(e=>t[e]))},handleSelectionChange(e){this.multipleSelection=e},handleSizeChange(e){this.queryInfo.pageSize=e,this.selectSctByConditionAndPage()},handleCurrentChange(e){this.queryInfo.currentPage=e,this.selectSctByConditionAndPage()},selectSctByConditionAndPage(){let e=this,t={tno:JSON.parse(localStorage.getItem("user")).sno,condition:this.queryInfo.condition,currentPage:this.queryInfo.currentPage,pageSize:this.queryInfo.pageSize};this.$axios.get(this.apiUrl.selectSctByPageAndCondition,{params:t}).then(t=>{e.tableData=t.data.data.data,e.total=t.data.data.total}).catch(e=>{console.log("--error--",e)})},selectAllSct(){this.common.getAllData(this,this.apiUrl.selectAllSct)}}},s=l,r=(o("6670"),o("2877")),i=Object(r["a"])(s,a,n,!1,null,"5ae90256",null);t["default"]=i.exports},6670:function(e,t,o){"use strict";var a=o("dcf7"),n=o.n(a);n.a},dcf7:function(e,t,o){}}]);
//# sourceMappingURL=chunk-5bce5c5a.9619c8b6.js.map