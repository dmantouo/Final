(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f250aa64"],{4133:function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("el-breadcrumb",{attrs:{separator:"/"}},[l("el-breadcrumb-item",{attrs:{to:{path:"/index"}}},[e._v("Home")]),l("el-breadcrumb-item",[e._v("Information")]),l("el-breadcrumb-item",[e._v("student")])],1),l("el-card",{attrs:{shadow:"always"}},[l("el-row",{attrs:{gutter:10}},[l("el-col",{attrs:{span:8}},[l("el-input",{attrs:{placeholder:"search by name",clearable:""},on:{clear:function(t){return e.selectStudentByConditionAndPage()}},model:{value:e.queryInfo.condition,callback:function(t){e.$set(e.queryInfo,"condition",t)},expression:"queryInfo.condition"}},[l("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.selectStudentByConditionAndPage()}},slot:"append"})],1)],1),l("el-col",{attrs:{span:3,offset:1}},[l("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("add one")])],1),l("el-col",{attrs:{span:3}},[l("el-upload",{attrs:{action:"https://jsonplaceholder.typicode.com/posts/","before-remove":e.beforeRemove,limit:1,"auto-upload":!1,"on-change":e.changeFile,accept:".xls,.xlsx"}},[l("el-button",{attrs:{type:"primary"}},[e._v("add file")])],1)],1),l("el-col",{attrs:{span:4}},[l("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.uploadFile()}}},[e._v("upload data")])],1),l("el-col",{attrs:{span:4}},[l("el-button",{attrs:{type:"success"},on:{click:function(t){return e.exportToExcel()}}},[e._v("Data export")])],1)],1),l("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:""},on:{"selection-change":e.handleSelectionChange}},[l("el-table-column",{attrs:{type:"selection",width:"40"}}),l("el-table-column",{attrs:{prop:"sno",label:"student ID"}}),l("el-table-column",{attrs:{prop:"sname",label:"name"}}),l("el-table-column",{attrs:{prop:"ssex",label:"sex"}}),l("el-table-column",{attrs:{prop:"sage",label:"age"}}),l("el-table-column",{attrs:{prop:"sdept",label:"faculty"}}),l("el-table-column",{attrs:{prop:"sid",label:"personal ID",width:"190px"}}),l("el-table-column",{attrs:{prop:"power",label:"Identity"},scopedSlots:e._u([{key:"default",fn:function(t){return["teacher"==t.row.power?l("el-tag",{attrs:{type:"success"}},[e._v("teacher")]):e._e(),"student"==t.row.power?l("el-tag",{attrs:{type:"success"}},[e._v("student")]):e._e()]}}])}),l("el-table-column",{attrs:{label:"operate"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(l){return e.showInfo(t.row.sno)}}}),l("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(l){return e.deleteStudent(t.row.sno)}}})]}}])})],1),l("el-pagination",{attrs:{"current-page":e.queryInfo.currentPage,"page-sizes":[1,2,5,10],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),l("el-dialog",{attrs:{title:"add student",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.resetDialog}},[l("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[l("el-form-item",{attrs:{label:"student ID","label-width":e.formLabelWidth,prop:"sno"}},[l("el-input",{attrs:{placeholder:"please input student ID",clearable:""},model:{value:e.form.sno,callback:function(t){e.$set(e.form,"sno",t)},expression:"form.sno"}})],1),l("el-form-item",{attrs:{label:"password","label-width":e.formLabelWidth,prop:"spassword"}},[l("el-input",{attrs:{placeholder:"please input password",clearable:""},model:{value:e.form.spassword,callback:function(t){e.$set(e.form,"spassword",t)},expression:"form.spassword"}})],1),l("el-form-item",{attrs:{label:"name","label-width":e.formLabelWidth,prop:"sname"}},[l("el-input",{attrs:{placeholder:"please input name",clearable:""},model:{value:e.form.sname,callback:function(t){e.$set(e.form,"sname",t)},expression:"form.sname"}})],1),l("el-form-item",{attrs:{label:"personal ID","label-width":e.formLabelWidth,prop:"sid"}},[l("el-input",{attrs:{placeholder:"please input personal ID",clearable:""},model:{value:e.form.sid,callback:function(t){e.$set(e.form,"sid",t)},expression:"form.sid"}})],1),l("el-form-item",{attrs:{label:"sex","label-width":e.formLabelWidth,prop:"ssex"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"please select sex",clearable:""},model:{value:e.form.ssex,callback:function(t){e.$set(e.form,"ssex",t)},expression:"form.ssex"}},[l("el-option",{attrs:{label:"boy",value:"boy"}}),l("el-option",{attrs:{label:"girl",value:"girl"}})],1)],1),l("el-form-item",{attrs:{label:"age","label-width":e.formLabelWidth,prop:"sage"}},[l("el-input",{attrs:{placeholder:"please input age",clearable:""},model:{value:e.form.sage,callback:function(t){e.$set(e.form,"sage",t)},expression:"form.sage"}})],1),l("el-form-item",{attrs:{label:"faculty","label-width":e.formLabelWidth,prop:"sdept"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"please input faculty",clearable:""},model:{value:e.form.sdept,callback:function(t){e.$set(e.form,"sdept",t)},expression:"form.sdept"}},e._l(e.allDepartment,(function(e){return l("el-option",{attrs:{label:e.dname,value:e.dname}})})),1)],1)],1),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:e.resetDialog}},[e._v("Cancel")]),l("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addOneStudent("form")}}},[e._v("Confirm")])],1)],1),l("el-dialog",{attrs:{title:"change information",visible:e.infoDialog},on:{"update:visible":function(t){e.infoDialog=t},close:e.resetInfoDialog}},[l("el-form",{ref:"InfoForm",attrs:{model:e.InfoForm,rules:e.rules}},[l("el-form-item",{attrs:{label:"student ID","label-width":e.formLabelWidth,prop:"sno"}},[l("el-input",{attrs:{clearable:""},model:{value:e.InfoForm.sno,callback:function(t){e.$set(e.InfoForm,"sno",t)},expression:"InfoForm.sno"}})],1),l("el-form-item",{attrs:{label:"password","label-width":e.formLabelWidth,prop:"spassword"}},[l("el-input",{attrs:{clearable:""},model:{value:e.InfoForm.spassword,callback:function(t){e.$set(e.InfoForm,"spassword",t)},expression:"InfoForm.spassword"}})],1),l("el-form-item",{attrs:{label:"name","label-width":e.formLabelWidth,prop:"sname"}},[l("el-input",{attrs:{clearable:""},model:{value:e.InfoForm.sname,callback:function(t){e.$set(e.InfoForm,"sname",t)},expression:"InfoForm.sname"}})],1),l("el-form-item",{attrs:{label:"sex","label-width":e.formLabelWidth,prop:"ssex"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"please select sex",clearable:""},model:{value:e.InfoForm.ssex,callback:function(t){e.$set(e.InfoForm,"ssex",t)},expression:"InfoForm.ssex"}},[l("el-option",{attrs:{label:"boy",value:"boy"}}),l("el-option",{attrs:{label:"girl",value:"girl"}})],1)],1),l("el-form-item",{attrs:{label:"age","label-width":e.formLabelWidth,prop:"sage"}},[l("el-input",{attrs:{clearable:""},model:{value:e.InfoForm.sage,callback:function(t){e.$set(e.InfoForm,"sage",t)},expression:"InfoForm.sage"}})],1),l("el-form-item",{attrs:{label:"faculty","label-width":e.formLabelWidth,prop:"sdept"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"please select faculty",clearable:""},model:{value:e.InfoForm.sdept,callback:function(t){e.$set(e.InfoForm,"sdept",t)},expression:"InfoForm.sdept"}},e._l(e.allDepartment,(function(e){return l("el-option",{attrs:{label:e.dname,value:e.dname}})})),1)],1),l("el-form-item",{attrs:{label:"personal ID","label-width":e.formLabelWidth,prop:"sid"}},[l("el-input",{attrs:{clearable:""},model:{value:e.InfoForm.sid,callback:function(t){e.$set(e.InfoForm,"sid",t)},expression:"InfoForm.sid"}})],1)],1),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:e.resetInfoDialog}},[e._v("Cancel")]),l("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.changeInfo("InfoForm")}}},[e._v("Confirm")])],1)],1)],1)},o=[],s={inject:["reload"],name:"studentInfo",data(){return{rules:{sno:[{required:!0,message:"please input student ID",trigger:"blur"},{pattern:/\b\d{12}\b/,message:"Please enter your 12-digit student ID",trigger:"blur"}],spassword:[{required:!0,message:"please input password",trigger:"blur"},{min:5,max:20,message:"It is between 5 and 20 characters long",trigger:"blur"}],sid:[{required:!0,message:"please input personal ID",trigger:"blur"},{pattern:/^[1-9]\d{5}(18|19|20)\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/,message:"please input right personal ID",trigger:"blur"}],sname:[{required:!0,message:"please input name",trigger:"blur"}],ssex:[{required:!0,message:"please select sex",trigger:"change"}],sage:[{required:!0,message:"please input age",trigger:"blur"},{pattern:/\b\d{2}\b/,message:"please input correct age",trigger:"blur"}],sdept:[{required:!0,message:"please select faculty",trigger:"change"}]},allDepartment:[],form:{sno:"",sname:"",spassword:"",ssex:"",sage:"",sdept:"",sid:"",power:"student"},InfoForm:{sno:"",sname:"",spassword:"",ssex:"",sage:"",sdept:"",sid:"",power:"student"},dialogFormVisible:!1,infoDialog:!1,formLabelWidth:"120px",selectNos:[],tableData:[],queryInfo:{condition:"",currentPage:1,pageSize:5},total:0,file:null,allTableData:[],multipleSelection:[]}},created(){this.selectStudentByConditionAndPage(),this.getAllStudent(),this.getAllDepartment()},methods:{changeInfo(e){this.$refs[e].validate(e=>{e&&this.common.changeInfo(this,this.apiUrl.updateInfo)})},resetInfoDialog(){this.$refs["InfoForm"].resetFields(),this.infoDialog=!1},showInfo(e){this.common.selectDetailInfo(this,this.apiUrl.selectStudentByNo,e)},exportToExcel(){l.e("chunk-26765ab6").then((()=>{let{exportJsonToExcel:e}=l("39a0"),t=["student ID","password","name","sex","age","faculty","personal ID","identity"],a=["sno","spassword","sname","ssex","sage","sdept","sid","power"],o=this.allTableData,s=this.formatJson(a,o);var r="student information";e(t,s,r)}).bind(null,l)).catch(l.oe)},formatJson(e,t){return t.map(t=>e.map(e=>t[e]))},uploadFile(){this.common.uploadData(this,this.apiUrl.addMultipleStudent)},addOneStudent(e){this.$refs[e].validate(e=>{e&&this.common.addOne(this,this.apiUrl.addStudent)})},resetDialog(){this.$refs["form"].resetFields(),this.dialogFormVisible=!1},deleteStudent(e){this.common.deletes(this,this.apiUrl.deleteStudentByNo,this.apiUrl.deleteMultipleStudent,"student",e)},handleSelectionChange(e){this.multipleSelection=e},selectStudentByConditionAndPage(){this.common.getAllDataByConditionAndPage(this,this.apiUrl.selectStudentByConditionAndPage)},changeFile(e){this.file=e},beforeRemove(e){return this.$confirm(`delete ${e.name}？`)},handleSizeChange(e){this.queryInfo.pageSize=e,this.selectStudentByConditionAndPage()},handleCurrentChange(e){this.queryInfo.currentPage=e,this.selectStudentByConditionAndPage()},getAllDepartment(){let e=this;this.$axios.get(this.apiUrl.selectAllDepartment).then(t=>{200==t.data.status&&(e.allDepartment=t.data.data.data)}).catch(e=>{console.log("---error---",e)})},getAllStudent(){this.common.getAllData(this,this.apiUrl.selectAllStudents)}}},r=s,n=(l("ac72"),l("2877")),i=Object(n["a"])(r,a,o,!1,null,"9f297a42",null);t["default"]=i.exports},"7df8":function(e,t,l){},ac72:function(e,t,l){"use strict";var a=l("7df8"),o=l.n(a);o.a}}]);
//# sourceMappingURL=chunk-f250aa64.712c45c5.js.map